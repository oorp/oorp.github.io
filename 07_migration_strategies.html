<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.3">
<title>7. Migration Strategies</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Remove comment around @import statement below when using as a custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
[hidden],template{display:none}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
body{margin:0}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
input[type="search"]{-webkit-appearance:textfield;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}
input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance:none}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*:before,*:after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
body{-webkit-font-smoothing:antialiased}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.spread{width:100%}
p.lead,.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{font-size:1.21875em;line-height:1.6}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #ddddd8;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol,ul.no-bullet,ol.no-bullet{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.no-bullet{list-style:none}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite:before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media only screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7;font-weight:bold}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
body{tab-size:4}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix:before,.clearfix:after,.float-group:before,.float-group:after{content:" ";display:table}
.clearfix:after,.float-group:after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menu{color:rgba(0,0,0,.8)}
b.button:before,b.button:after{position:relative;top:-1px;font-weight:400}
b.button:before{content:"[";padding:0 3px 0 2px}
b.button:after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header:before,#header:after,#content:before,#content:after,#footnotes:before,#footnotes:after,#footer:before,#footer:after{content:" ";display:table}
#header:after,#content:after,#footnotes:after,#footer:after{clear:both}
#content{margin-top:1.25em}
#content:before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #ddddd8}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #ddddd8;padding-bottom:8px}
#header .details{border-bottom:1px solid #ddddd8;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span:before{content:"\00a0\2013\00a0"}
#header .details br+span.author:before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark:before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber:after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #ddddd8;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #efefed;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media only screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #efefed;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #efefed;left:auto;right:0}}
@media only screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
.sect1{padding-bottom:.625em}
@media only screen and (min-width:768px){.sect1{padding-bottom:1.25em}}
.sect1+.sect1{border-top:1px solid #efefed}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor:before,h2>a.anchor:before,h3>a.anchor:before,#toctitle>a.anchor:before,.sidebarblock>.content>.title>a.anchor:before,h4>a.anchor:before,h5>a.anchor:before,h6>a.anchor:before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock>caption.title{white-space:nowrap;overflow:visible;max-width:0}
.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>.paragraph:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #ddddd8;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;padding:1em;font-size:.8125em}
.literalblock pre.nowrap,.literalblock pre[class].nowrap,.listingblock pre.nowrap,.listingblock pre[class].nowrap{overflow-x:auto;white-space:pre;word-wrap:normal}
@media only screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}
@media only screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}
.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]:before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]:before{display:block}
.listingblock.terminal pre .command:before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt]):before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0;line-height:1.45}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #ddddd8}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock blockquote p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote:before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.5em;margin-right:.5ex;text-align:right}
.quoteblock .quoteblock{margin-left:0;margin-right:0;padding:.5em 0;border-left:3px solid rgba(0,0,0,.6)}
.quoteblock .quoteblock blockquote{padding:0 0 0 .75em}
.quoteblock .quoteblock blockquote:before{display:none}
.verseblock{margin:0 1em 1.25em 1em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract{margin:0 0 1.25em 0;display:block}
.quoteblock.abstract blockquote,.quoteblock.abstract blockquote p{text-align:left;word-spacing:0}
.quoteblock.abstract blockquote:before,.quoteblock.abstract blockquote p:first-of-type:before{display:none}
table.tableblock{max-width:100%;border-collapse:separate}
table.tableblock td>.paragraph:last-child p>p:last-child,table.tableblock th>p:last-child,table.tableblock td>p:last-child{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all th.tableblock,table.grid-all td.tableblock{border-width:0 1px 1px 0}
table.grid-all tfoot>tr>th.tableblock,table.grid-all tfoot>tr>td.tableblock{border-width:1px 1px 0 0}
table.grid-cols th.tableblock,table.grid-cols td.tableblock{border-width:0 1px 0 0}
table.grid-all *>tr>.tableblock:last-child,table.grid-cols *>tr>.tableblock:last-child{border-right-width:0}
table.grid-rows th.tableblock,table.grid-rows td.tableblock{border-width:0 0 1px 0}
table.grid-all tbody>tr:last-child>th.tableblock,table.grid-all tbody>tr:last-child>td.tableblock,table.grid-all thead:last-child>tr>th.tableblock,table.grid-rows tbody>tr:last-child>th.tableblock,table.grid-rows tbody>tr:last-child>td.tableblock,table.grid-rows thead:last-child>tr>th.tableblock{border-bottom-width:0}
table.grid-rows tfoot>tr>th.tableblock,table.grid-rows tfoot>tr>td.tableblock{border-width:1px 0 0 0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot{border-width:1px 0}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.unstyled,ol.unnumbered,ul.checklist,ul.none{list-style-type:none}
ul.unstyled,ol.unnumbered,ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1em;font-size:.85em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{width:1em;position:relative;top:1px}
ul.inline{margin:0 auto .625em auto;margin-left:-1.375em;margin-right:0;padding:0;list-style:none;overflow:hidden}
ul.inline>li{list-style:none;float:left;margin-left:1.375em;display:block}
ul.inline>li>*{display:block}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist>table tr>td:first-of-type{padding:0 .75em;line-height:1}
.colist>table tr>td:last-of-type{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left,.imageblock[style*="float: left"]{margin:.25em .625em 1.25em 0}
.imageblock.right,.imageblock[style*="float: right"]{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em 0;border-width:1px 0 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;text-indent:-1.05em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note:before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip:before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning:before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution:before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important:before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]:after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@media print{@page{margin:1.25cm .75cm}
*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare):after,a[href^="https:"]:not(.bare):after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]:after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #ddddd8!important;padding-bottom:0!important}
.sect1{padding-bottom:0!important}
.sect1+.sect1{border:0!important}
#header>h1:first-child{margin-top:1.25rem}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em 0}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span:before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]:before{display:block}
#footer{background:none!important;padding:0 .9375em}
#footer-text{color:rgba(0,0,0,.6)!important;font-size:.9em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.4.0/css/font-awesome.min.css">
<style>
/* Stylesheet for CodeRay to match GitHub theme | MIT License | http://foundation.zurb.com */
/*pre.CodeRay {background-color:#f7f7f8;}*/
.CodeRay .line-numbers{border-right:1px solid #d8d8d8;padding:0 0.5em 0 .25em}
.CodeRay span.line-numbers{display:inline-block;margin-right:.5em;color:rgba(0,0,0,.3)}
.CodeRay .line-numbers strong{color:rgba(0,0,0,.4)}
table.CodeRay{border-collapse:separate;border-spacing:0;margin-bottom:0;border:0;background:none}
table.CodeRay td{vertical-align: top;line-height:1.45}
table.CodeRay td.line-numbers{text-align:right}
table.CodeRay td.line-numbers>pre{padding:0;color:rgba(0,0,0,.3)}
table.CodeRay td.code{padding:0 0 0 .5em}
table.CodeRay td.code>pre{padding:0}
.CodeRay .debug{color:#fff !important;background:#000080 !important}
.CodeRay .annotation{color:#007}
.CodeRay .attribute-name{color:#000080}
.CodeRay .attribute-value{color:#700}
.CodeRay .binary{color:#509}
.CodeRay .comment{color:#998;font-style:italic}
.CodeRay .char{color:#04d}
.CodeRay .char .content{color:#04d}
.CodeRay .char .delimiter{color:#039}
.CodeRay .class{color:#458;font-weight:bold}
.CodeRay .complex{color:#a08}
.CodeRay .constant,.CodeRay .predefined-constant{color:#008080}
.CodeRay .color{color:#099}
.CodeRay .class-variable{color:#369}
.CodeRay .decorator{color:#b0b}
.CodeRay .definition{color:#099}
.CodeRay .delimiter{color:#000}
.CodeRay .doc{color:#970}
.CodeRay .doctype{color:#34b}
.CodeRay .doc-string{color:#d42}
.CodeRay .escape{color:#666}
.CodeRay .entity{color:#800}
.CodeRay .error{color:#808}
.CodeRay .exception{color:inherit}
.CodeRay .filename{color:#099}
.CodeRay .function{color:#900;font-weight:bold}
.CodeRay .global-variable{color:#008080}
.CodeRay .hex{color:#058}
.CodeRay .integer,.CodeRay .float{color:#099}
.CodeRay .include{color:#555}
.CodeRay .inline{color:#000}
.CodeRay .inline .inline{background:#ccc}
.CodeRay .inline .inline .inline{background:#bbb}
.CodeRay .inline .inline-delimiter{color:#d14}
.CodeRay .inline-delimiter{color:#d14}
.CodeRay .important{color:#555;font-weight:bold}
.CodeRay .interpreted{color:#b2b}
.CodeRay .instance-variable{color:#008080}
.CodeRay .label{color:#970}
.CodeRay .local-variable{color:#963}
.CodeRay .octal{color:#40e}
.CodeRay .predefined{color:#369}
.CodeRay .preprocessor{color:#579}
.CodeRay .pseudo-class{color:#555}
.CodeRay .directive{font-weight:bold}
.CodeRay .type{font-weight:bold}
.CodeRay .predefined-type{color:inherit}
.CodeRay .reserved,.CodeRay .keyword {color:#000;font-weight:bold}
.CodeRay .key{color:#808}
.CodeRay .key .delimiter{color:#606}
.CodeRay .key .char{color:#80f}
.CodeRay .value{color:#088}
.CodeRay .regexp .delimiter{color:#808}
.CodeRay .regexp .content{color:#808}
.CodeRay .regexp .modifier{color:#808}
.CodeRay .regexp .char{color:#d14}
.CodeRay .regexp .function{color:#404;font-weight:bold}
.CodeRay .string{color:#d20}
.CodeRay .string .string .string{background:#ffd0d0}
.CodeRay .string .content{color:#d14}
.CodeRay .string .char{color:#d14}
.CodeRay .string .delimiter{color:#d14}
.CodeRay .shell{color:#d14}
.CodeRay .shell .delimiter{color:#d14}
.CodeRay .symbol{color:#990073}
.CodeRay .symbol .content{color:#a60}
.CodeRay .symbol .delimiter{color:#630}
.CodeRay .tag{color:#008080}
.CodeRay .tag-special{color:#d70}
.CodeRay .variable{color:#036}
.CodeRay .insert{background:#afa}
.CodeRay .delete{background:#faa}
.CodeRay .change{color:#aaf;background:#007}
.CodeRay .head{color:#f8f;background:#505}
.CodeRay .insert .insert{color:#080}
.CodeRay .delete .delete{color:#800}
.CodeRay .change .change{color:#66f}
.CodeRay .head .head{color:#f4f}
</style>
</head>
<body class="article toc2 toc-left">
<div id="header">
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#migration-strategies">7. Migration Strategies</a>
<ul class="sectlevel2">
<li><a href="#forces-5">Forces</a></li>
<li><a href="#overview-5">Overview</a></li>
<li><a href="#involve-the-users">7.1 Involve the Users</a></li>
<li><a href="#build-confidence">7.2 Build Confidence</a></li>
<li><a href="#migrate-systems-incrementally">7.3 Migrate Systems Incrementally</a></li>
<li><a href="#prototype-the-target-solution">7.4 Prototype the Target Solution</a></li>
<li><a href="#always-have-a-running-version">7.5 Always Have a Running Version</a></li>
<li><a href="#regression-test-after-every-change">7.6 Regression Test After Every Change</a></li>
<li><a href="#make-a-bridge-to-the-new-town">7.7 Make a Bridge to the New Town</a></li>
<li><a href="#present-the-right-interface">7.8 Present the Right Interface</a></li>
<li><a href="#distinguish-public-from-published-interface">7.9 Distinguish Public from Published Interface</a></li>
<li><a href="#deprecate-obsolete-interfaces">7.10 Deprecate Obsolete Interfaces</a></li>
<li><a href="#conserve-familiarity">7.11 Conserve Familiarity</a></li>
<li><a href="#use-profiler-before-optimizing">7.12 Use Profiler Before Optimizing</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="migration-strategies"><a class="anchor" href="#migration-strategies"></a>7. Migration Strategies</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Your reengineering project is well underway. You have developed a good understanding of the legacy system and you have started to Write Tests to Enable Evolution [p. 139]. You have gone through a process of Setting Direction and have decided to tackle the Most Valuable First [p. 25].</p>
</div>
<div class="paragraph">
<p>How can you be sure that the new system will be accepted by users? How do you migrate to the new system while the old system is being used? How can you test and evaluate the new system before it is finished?</p>
</div>
<div class="sect2">
<h3 id="forces-5"><a class="anchor" href="#forces-5"></a>Forces</h3>
<div class="ulist">
<ul>
<li>
<p>Big-bang migration carries a high risk of failure.</p>
</li>
<li>
<p>Introducing too many changes at once may alienate users.</p>
</li>
<li>
<p>Constant feedback helps you stay on track, though it may be difficult and costly to achieve.</p>
</li>
<li>
<p>Users have to get their work done; they don’t want to be distracted by incomplete solution.</p>
</li>
<li>
<p>Legacy data must survive while the system is being used.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="overview-5"><a class="anchor" href="#overview-5"></a>Overview</h3>
<div class="paragraph">
<p>It is not enough to reengineer a legacy system and then deploy it. In fact, if you try this, you will surely fail (for the same reasons that big Waterfall projects in new territories often fail). You must be prepared to introduce the new solution gradually, to gain the confidence and collaboration</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="./media/image22.jpg" alt="image" width="432" height="256"></span></p>
</div>
<div class="paragraph">
<p>Figure 7.1: How, why and whither to migrate legacy systems.
of the users, and you must adopt a strategy for migrating gradually and painlessly from the existing system, <em>while it is still being deployed</em>, to the new system.</p>
</div>
<div class="paragraph">
<p>The central message of this cluster is to Migrate Systems Incrementally. This is, however, easier said than done. In figure 25 we can see that in order to Migrate Systems Incrementally, we should consider a large number of other patterns. Since there exists a vast literature on system migration, we do not attempt to cover the topic in great detail. We have selected, however, the patterns that we consider to be most important for reengineering object-oriented legacy systems, and summarized the main points. Where appropriate, we point the reader to further sources of information.</p>
</div>
<div class="paragraph">
<p>Although the central pattern of this cluster is Migrate Systems Incrementally, the key motivation is provided by Involve the Users and Build Confidence. These first three patterns are fundamental patterns for minimizing risk and increasing the chances of success:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Involve the Users increases the chance that users will accept the new system by involving them closely in the entire reengineering process, getting them to use intermediate results, and providing them with strong support. It is easier to achieve if you Migrate Systems Incrementally and Build Confidence step by step.</p>
</li>
<li>
<p>Build Confidence helps you overcome skepticism and doubt by regularly delivering results that are of value to the users.</p>
</li>
<li>
<p>Migrate Systems Incrementally recommends that the old system be gradually and incrementally replaced by the new system. New results can then be integrated as you proceed, thus helping you to Build Confidence and Involve the Users.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>It is very hard to Migrate Systems Incrementally unless you also adhere to the following practices:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Prototype the Target Solution to test the new architecture and new technical risks. It is too easy to be tempted to think you don’t need a prototype since you already have a running system, but this is almost always a mistake.</p>
</li>
<li>
<p>Always Have a Running Version helps to keep changes in sync by ensuring that they are integrated frequently.</p>
</li>
<li>
<p>Regression Test After Every Change helps to you Always Have a Running Version by making sure that everything that used to run still runs. It presupposes that you Write Tests to Enable Evolution [p. 139].</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Depending on the circumstances, there are various practices that may help you to Migrate Systems Incrementally:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Make a Bridge to the New Town introduces the metaphor of a (data) “bridge” to allow you to gradually migrate data from a legacy component to its replacement, while the two run in tandem. When all the data have been transferred, the legacy component can be retired.</p>
</li>
<li>
<p>Present the Right Interface helps you to develop the target system in increments by wrapping the old functionality to export the abstractions you really want.</p>
</li>
<li>
<p>Distinguish Public from Published Interface distinguishes between stable (public) and unstable (published) interfaces to facilitate parallel development within a reengineering team.</p>
</li>
<li>
<p>Deprecate Obsolete Interfaces lets you gracefully retire obsolete interfaces without immediately invalidating clients.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Finally, the following two practices may help you avoid making radical, but unnecessary changes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Conserve Familiarity warns you against introducing radical interface changes that may alienate users.</p>
</li>
<li>
<p>Use Profiler Before Optimizing [p. 198] reminds you to delay considering performance issues until you can demonstrate that you have a problem and can pinpoint the source of the problem.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="involve-the-users"><a class="anchor" href="#involve-the-users"></a>7.1 Involve the Users</h3>
<div class="paragraph">
<p><em>Also Known As:</em> Engage Customers [Cop95]</p>
</div>
<div class="paragraph">
<p><strong>Intent</strong> <em>Maximize acceptance of changes by involving the users at every step.</em></p>
</div>
<div class="sect3">
<h4 id="problem-19"><a class="anchor" href="#problem-19"></a>Problem</h4>
<div class="paragraph">
<p>How can you be sure that users will accept the reengineered system?</p>
</div>
<div class="paragraph">
<p><em>This problem is difficult because:</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p>The old systems works. It is clunky, but the users know how it works and know how to get around the problems.</p>
</li>
<li>
<p>People hate to have to learn something new unless it really makes their life simpler.</p>
</li>
<li>
<p>User perceptions of what is needed to improve a system tend to change as the system evolves.</p>
</li>
<li>
<p>Users can have difficulty evaluating a paper design.</p>
</li>
<li>
<p>It is hard to get excited about a new system that is not ready to use.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><em>Yet, solving this problem is feasible because:</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Users will try new solutions if they see that their needs are being seriously addressed.</p>
</li>
<li>
<p>Users will give you feedback if you give them something useful to use.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="solution-18"><a class="anchor" href="#solution-18"></a>Solution</h4>
<div class="paragraph">
<p>Get the users directly involved in the new development, and support them closely in using the new system.</p>
</div>
<div class="sect4">
<h5 id="steps-3"><a class="anchor" href="#steps-3"></a>Steps</h5>
<div class="paragraph">
<p>Get the users to tell you where their priorities lie. Start with Most Valuable First [p. 25]. Break the priorities down into small steps that can be delivered in regular increments, so you can Build Confidence [p. 172].</p>
</div>
<div class="paragraph">
<p>Create an environment that will encourage contact between users and developers. Physical location is important.</p>
</div>
<div class="paragraph">
<p>Establish simple procedures for delivering intermediate results on a regular basis and obtaining feedback. Early prototypes may help, especially to evaluate risky new technologies or approaches. A good strategy is to Migrate Systems Incrementally [p. 174] so that users can start using the new system as it is being built. You should Conserve Familiarity [p. 196] to avoid alienating users.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="tradeoffs-19"><a class="anchor" href="#tradeoffs-19"></a>Tradeoffs</h4>
<div class="sect4">
<h5 id="pros-18"><a class="anchor" href="#pros-18"></a>Pros</h5>
<div class="ulist">
<ul>
<li>
<p>Requirements will continuously be validated and updated, increasing your chances that you will move in the right direction.</p>
</li>
<li>
<p>If the users feel they are getting useful results and they are being supported, they will put extra effort into giving useful feedback.</p>
</li>
<li>
<p>Users will be involved throughout the effort, eliminating the need for a special training session late in the project.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="cons-18"><a class="anchor" href="#cons-18"></a>Cons</h5>
<div class="ulist">
<ul>
<li>
<p>Developers may feel that supporting users is distracting them from the job of reengineering the system.</p>
</li>
<li>
<p>If you succeed in involving the users, this will raise expectations and put extra pressure on your team. For instance, Yourdon mentions that prototypes can really raise expectations too much and that you should always make clear which parts are not yet working [You97].</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="difficulties-17"><a class="anchor" href="#difficulties-17"></a>Difficulties</h5>
<div class="ulist">
<ul>
<li>
<p>It can be hard to involve the users initially, before you have shown any results.</p>
</li>
<li>
<p>You can’t involve everybody, and the users who are left out might feel neglected.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="rationale-15"><a class="anchor" href="#rationale-15"></a>Rationale</h4>
<div class="paragraph">
<p>You need a feedback loop to ensure that you are addressing the real customer needs. By involving and supporting the users, you encourage this feedback loop.</p>
</div>
<div class="paragraph">
<p>Coplien points out: <em>“Note that ‘maintaining product quality’ is not the problem being solved here. Product quality is only one component of customer satisfaction.”</em> [Cop95]</p>
</div>
</div>
<div class="sect3">
<h4 id="related-patterns-9"><a class="anchor" href="#related-patterns-9"></a>Related Patterns</h4>
<div class="paragraph">
<p>Virtually all of the patterns in this cluster support Involve the Users. Migrate Systems Incrementally to get the users working with the system as it is being reengineered and thereby Build Confidence.</p>
</div>
<div class="paragraph">
<p>The Planning Game [BF01] is an effective technique to Involve the Users by iteratively identifying stories, estimating costs, and committing to the stories to be released.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="build-confidence"><a class="anchor" href="#build-confidence"></a>7.2 Build Confidence</h3>
<div class="paragraph">
<p><strong>Intent</strong> <em>Improve your chances of overall success by demonstrating results in regular increments.</em></p>
</div>
<div class="sect3">
<h4 id="problem-20"><a class="anchor" href="#problem-20"></a>Problem</h4>
<div class="paragraph">
<p>How can you overcome the high degree of skepticism that customers and team members often have for any kind of software project?</p>
</div>
<div class="paragraph">
<p><em>This problem is difficult because:</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Few software projects meet requirements, come in on time, and stay within budget. The skepticism that accompanies most projects can easily lead to defeatism, and projects can fail as a self-fulfilling prophecy.</p>
</li>
<li>
<p>Users rarely get what they really want or need.</p>
</li>
<li>
<p>It can be hard to convince either the users or even your own team that the legacy system can really be salvaged.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><em>Yet, solving this problem is feasible because:</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p>You don’t need to solve all the problems at once.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="solution-19"><a class="anchor" href="#solution-19"></a>Solution</h4>
<div class="paragraph">
<p>Create a positive atmosphere by demonstrating some positive results as early as you can, and continue to do so on a regular basis.</p>
</div>
<div class="sect4">
<h5 id="steps-4"><a class="anchor" href="#steps-4"></a>Steps</h5>
<div class="paragraph">
<p>Pick short intervals for delivering new results. At each step, try to agree together with the users what are the smallest results that can demonstrate real value.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="tradeoffs-20"><a class="anchor" href="#tradeoffs-20"></a>Tradeoffs</h4>
<div class="sect4">
<h5 id="pros-19"><a class="anchor" href="#pros-19"></a>Pros</h5>
<div class="ulist">
<ul>
<li>
<p>Both users and developers can measure real progress.</p>
</li>
<li>
<p>It is easier to estimate the cost of smaller steps.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="cons-19"><a class="anchor" href="#cons-19"></a>Cons</h5>
<div class="ulist">
<ul>
<li>
<p>It takes time to frequently synchronize with the users.</p>
</li>
<li>
<p>Users may resent the extra work it takes to use the new system in tandem with the old one.</p>
</li>
<li>
<p>If you succeed to demonstrate good results early in the project, you may raise expectations too high.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="difficulties-18"><a class="anchor" href="#difficulties-18"></a>Difficulties</h5>
<div class="ulist">
<ul>
<li>
<p>Some requirements can be hard to break down into small steps, particularly if they entail architectural changes to the system.</p>
</li>
<li>
<p>Reengineering teams must be careful not to alienate the developers of the original system, since they are one of the most valuable sources of information.</p>
</li>
<li>
<p>It is not enough to convince users — you must also take care to get commitment from management. It is hard to convince management in small steps. Plan big demos at regular intervals.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="rationale-16"><a class="anchor" href="#rationale-16"></a>Rationale</h4>
<div class="paragraph">
<p>By taking smaller steps, you reduce the risk that an individual step will fail. Frequent, positive results help to build confidence. By the same token, Extreme Programming advocates Small Releases [Bec00]. Even negative results help you to monitor progress and understand better the situation, and so help to build up confidence.</p>
</div>
</div>
<div class="sect3">
<h4 id="related-patterns-10"><a class="anchor" href="#related-patterns-10"></a>Related Patterns</h4>
<div class="paragraph">
<p>Prototype the Target Solution and Make a Bridge to the New Town can make it easier to demonstrate results in small steps.</p>
</div>
<div class="paragraph">
<p>It is easier to Build Confidence if you Involve the Users.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="migrate-systems-incrementally"><a class="anchor" href="#migrate-systems-incrementally"></a>7.3 Migrate Systems Incrementally</h3>
<div class="paragraph">
<p><em>Also Known As:</em> Chicken Little [BS95]</p>
</div>
<div class="paragraph">
<p><strong>Intent</strong> <em>Avoid complexity and risk of big-bang reengineering by deploying functionality in frequent increments.</em></p>
</div>
<div class="sect3">
<h4 id="problem-21"><a class="anchor" href="#problem-21"></a>Problem</h4>
<div class="paragraph">
<p>When should you plan to deploy the new system?</p>
</div>
<div class="paragraph">
<p><em>This problem is difficult because:</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Projects are often planned and funded on large time scales, with “big bang” requirements specification done up front.</p>
</li>
<li>
<p>The real requirements are often only clear in hindsight. Users will resist adopting a new system that is radically different from what they are used to, especially if it does not work flawlessly from the beginning.</p>
</li>
<li>
<p>The longer you wait to deploy the new system, the longer you must wait to get user feedback.</p>
</li>
<li>
<p>You cannot deploy an incomplete system. Users do not have time to waste on incomplete solutions.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><em>Yet, solving this problem is feasible because:</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p>You have a running system that can be extended and modified.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="solution-20"><a class="anchor" href="#solution-20"></a>Solution</h4>
<div class="paragraph">
<p>Deploy a first <em>update</em> of the legacy system as soon as you can, and migrate incrementally to the target system.</p>
</div>
<div class="sect4">
<h5 id="steps-5"><a class="anchor" href="#steps-5"></a>Steps</h5>
<div class="ulist">
<ul>
<li>
<p>Decompose the legacy system into parts.</p>
</li>
<li>
<p>Choose one part to tackle at a time.</p>
</li>
<li>
<p>Put tests in place for that part and the parts that depend on it.</p>
</li>
<li>
<p>Take appropriate steps to wrap, reengineer or replace the legacy component.</p>
</li>
<li>
<p>Deploy the updated component and obtain feedback.</p>
</li>
<li>
<p>Iterate.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="tradeoffs-21"><a class="anchor" href="#tradeoffs-21"></a>Tradeoffs</h4>
<div class="sect4">
<h5 id="pros-20"><a class="anchor" href="#pros-20"></a>Pros</h5>
<div class="ulist">
<ul>
<li>
<p>You get user feedback early and Build Confidence.</p>
</li>
<li>
<p>You see immediately when things break.</p>
</li>
<li>
<p>Users learn the new system as it’s being built.</p>
</li>
<li>
<p>The system is always deployed.</p>
</li>
<li>
<p>The system is always being tested, so you can’t skip testing.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="cons-20"><a class="anchor" href="#cons-20"></a>Cons</h5>
<div class="ulist">
<ul>
<li>
<p>You will have to work harder to keep the system running while you are changing it.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="difficulties-19"><a class="anchor" href="#difficulties-19"></a>Difficulties</h5>
<div class="ulist">
<ul>
<li>
<p>It can be difficult to migrate to a new architecture. You may want to Prototype the Target Solution to get the new architecture in place, and Present the Right Interface to the old system to hide the legacy interfaces while you migrate the underlying components.</p>
</li>
<li>
<p>It is risky to change a running system. Be sure to Regression Test After Every Change.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="rationale-17"><a class="anchor" href="#rationale-17"></a>Rationale</h4>
<div class="paragraph">
<p>You get the best user feedback from a running system. Users are more motivated and involved with a system they use daily.</p>
</div>
</div>
<div class="sect3">
<h4 id="known-uses-13"><a class="anchor" href="#known-uses-13"></a>Known Uses</h4>
<div class="paragraph">
<p><em>Migrating Legacy Systems</em> [BS95] introduces this pattern under the name “Chicken Little” (to migrate incrementally means to “take Chicken Little steps”). This book discusses in great detail strategies and techniques for incremental migration.</p>
</div>
</div>
<div class="sect3">
<h4 id="related-patterns-11"><a class="anchor" href="#related-patterns-11"></a>Related Patterns</h4>
<div class="paragraph">
<p>Apply Most Valuable First [p. 25] to select the legacy components to work on first. Appoint a Navigator [p. 23] to maintain architectural integrity.</p>
</div>
<div class="paragraph">
<p>Write Tests to Enable Evolution [p. 139], and Grow Your Test Base Incrementally [p. 144] as you migrate. Be sure to Test the Interface, Not the Implementation [p. 155] so you do not always have to rewrite your tests as you reengineer or replace legacy components. Regression Test After Every Change [p. 182] so you can Always Have a Running Version [p. 180].</p>
</div>
<div class="paragraph">
<p>Consider applying Present the Right Interface for legacy components that you do not intend to reengineer or replace.</p>
</div>
<div class="paragraph">
<p>You might consider to Make a Bridge to the New Town [p. 184] if you need to migrate data from legacy components that you are replacing.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="prototype-the-target-solution"><a class="anchor" href="#prototype-the-target-solution"></a>7.4 Prototype the Target Solution</h3>
<div class="paragraph">
<p><strong>Intent</strong> <em>Evaluate the risk of migrating to a new target solution by building a prototype.</em></p>
</div>
<div class="sect3">
<h4 id="problem-22"><a class="anchor" href="#problem-22"></a>Problem</h4>
<div class="paragraph">
<p>How do you know if your ideas for the new target system will work?</p>
</div>
<div class="paragraph">
<p><em>This problem is difficult because:</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p>It is risky to make radical changes to a working system.</p>
</li>
<li>
<p>It can be hard to anticipate how design changes will impact existing functionality.</p>
</li>
<li>
<p>A solution that works is more believable than one that one that has not been tested.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><em>Yet, solving this problem is feasible because:</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p>You don’t need to reengineer the whole legacy system to test the new ideas.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="solution-21"><a class="anchor" href="#solution-21"></a>Solution</h4>
<div class="paragraph">
<p>Develop a prototype of the new concept and evaluate it with respect to the new, emerging requirements.</p>
</div>
<div class="sect4">
<h5 id="steps-6"><a class="anchor" href="#steps-6"></a>Steps</h5>
<div class="ulist">
<ul>
<li>
<p>Identify the biggest technical risks for your reengineering project. Typically they will concern things like:</p>
<div class="ulist">
<ul>
<li>
<p>choice of a new system architecture</p>
</li>
<li>
<p>migration of legacy data to new system</p>
</li>
<li>
<p>adequate performance — or performance gains — with new technology or platform (for example, demonstrating that a certain transaction throughput can be achieved)</p>
</li>
</ul>
</div>
</li>
<li>
<p>Decide whether to implement an exploratory (<em>i.e.</em>, throwaway) prototype that will service purely to evaluate the feasibility of a technical option, or rather an evolutionary prototype that will eventually evolve into the new target system.</p>
<div class="ulist">
<ul>
<li>
<p>An exploratory prototype must be designed to answer very precise questions. These may be purely technical questions, such as whether the new platform can meet performance constraints set by the legacy system, or they may be usability questions which require participation of and evaluation by the users. The exploratory prototype does not need to be designed to address any other issues or questions, and will not be part of the migrated system (although the answers it provides will influence the new system).</p>
</li>
<li>
<p>An evolutionary prototype, on the other hand, is intended to eventually replace a legacy component, and must therefore reflect the target architecture. The new architecture most not only adequately support the legacy services, but also overcome the obstacles that limit the legacy solution’s usefulness. The prototype must be design to answer these risks first.
==== Tradeoffs</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="pros-21"><a class="anchor" href="#pros-21"></a>Pros</h5>
<div class="ulist">
<ul>
<li>
<p>A prototype can be built quickly, since it does not have to implement all the functionality of the legacy system.</p>
</li>
<li>
<p>You can hack parts of the legacy system to get your prototype running.</p>
</li>
<li>
<p>You can learn quickly if your ideas for the target system are sound.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="cons-21"><a class="anchor" href="#cons-21"></a>Cons</h5>
<div class="ulist">
<ul>
<li>
<p>Users may not be highly motivated to spend a lot of time evaluating a throwaway prototype.</p>
</li>
<li>
<p>You may be tempted to continue to develop the throwaway prototype.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="difficulties-20"><a class="anchor" href="#difficulties-20"></a>Difficulties</h5>
<div class="ulist">
<ul>
<li>
<p>It may be hard to convince yourself or your customer of the need for a prototype — after all, you already have a running system.</p>
</li>
<li>
<p>It can take too much time to get an evolutionary prototype up to speed. Consider applying Present the Right Interface to legacy components to provide a good interface for legacy services to the prototype.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="rationale-18"><a class="anchor" href="#rationale-18"></a>Rationale</h4>
<div class="paragraph">
<p>A prototype can tell you quickly whether a certain technical approach is sound or not. Brooks in <em>The Mythical Man-Month</em> [Bro75] advises us to “write one to throw away” since it is hard to get it right the first time.</p>
</div>
<div class="paragraph">
<p>Love [Lov93] takes this one step further and warns us that, for objectoriented systems we should “write two to throw away"! Foote and Yoder [FY00] argue that, among other things, Throwaway Code is often the best way to clarify domain requirements, but they also warn that a prototype risks evolving into a “Big Ball of Mud”.</p>
</div>
</div>
<div class="sect3">
<h4 id="related-patterns-12"><a class="anchor" href="#related-patterns-12"></a>Related Patterns</h4>
<div class="paragraph">
<p>You might consider applying Make a Bridge to the New Town to migrate legacy data to an evolutionary prototype.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="always-have-a-running-version"><a class="anchor" href="#always-have-a-running-version"></a>7.5 Always Have a Running Version</h3>
<div class="paragraph">
<p><strong>Intent</strong> <em>Increase confidence in changes by regularly rebuilding the system.</em></p>
</div>
<div class="sect3">
<h4 id="problem-23"><a class="anchor" href="#problem-23"></a>Problem</h4>
<div class="paragraph">
<p>How do you convince your customer that you are on the right path?</p>
</div>
<div class="paragraph">
<p><em>This problem is difficult because:</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p>It can be hard to demo a software system under development, or to discuss problems with users since there is often no stable, running version of the system available.</p>
</li>
<li>
<p>Integrating changes from multiple versions of a system can be slow and painful.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><em>Yet, solving this problem is feasible because:</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p>You don’t have to wait until a component is “finished” before integrating it.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="solution-22"><a class="anchor" href="#solution-22"></a>Solution</h4>
<div class="paragraph">
<p>Institute a discipline of integrating new changes and developments on a daily basis.</p>
</div>
<div class="sect4">
<h5 id="steps-7"><a class="anchor" href="#steps-7"></a>Steps</h5>
<div class="ulist">
<ul>
<li>
<p>Have version management and configuration management systems in place.</p>
</li>
<li>
<p>Make sure you have regression tests in place for the parts you are working on.</p>
</li>
<li>
<p>Institute a discipline of short transactions for checking out system components and checking them back in again. Plan iterations to be as short as possible to allow changes to be integrated into a running system.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="tradeoffs-23"><a class="anchor" href="#tradeoffs-23"></a>Tradeoffs</h4>
<div class="sect4">
<h5 id="pros-22"><a class="anchor" href="#pros-22"></a>Pros</h5>
<div class="ulist">
<ul>
<li>
<p>You always have a working version to demo.</p>
</li>
<li>
<p>You can always have a working version to run your regression tests.</p>
</li>
<li>
<p>You can quickly validate your changes, thereby helping you to Build Confidence.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Cons</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>You must continuously integrate changes.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="difficulties-21"><a class="anchor" href="#difficulties-21"></a>Difficulties</h5>
<div class="ulist">
<ul>
<li>
<p>Large systems may have very long build times. You may need to rearchitect the system first to enable shorter build times.</p>
</li>
<li>
<p>It can be hard to break some kinds of large modifications into meaningful updates that can be individually integrated.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="rationale-19"><a class="anchor" href="#rationale-19"></a>Rationale</h4>
<div class="paragraph">
<p>Many practitioners advocate a process of continuous integration as a way to avoid a risky and painful big-bang integration [Boo94].</p>
</div>
</div>
<div class="sect3">
<h4 id="related-patterns-13"><a class="anchor" href="#related-patterns-13"></a>Related Patterns</h4>
<div class="paragraph">
<p>Regression Test After Every Change minimizes the risk of defects creeping in during integration.</p>
</div>
<div class="paragraph">
<p>Continuous Integration [Boo94] [Bec00] is a proven way to Always Have a Running Version.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="regression-test-after-every-change"><a class="anchor" href="#regression-test-after-every-change"></a>7.6 Regression Test After Every Change</h3>
<div class="paragraph">
<p><strong>Intent</strong> <em>Build confidence by making sure that whatever worked before still works.</em></p>
</div>
<div class="sect3">
<h4 id="problem-24"><a class="anchor" href="#problem-24"></a>Problem</h4>
<div class="paragraph">
<p>How can you be sure that the last change you made won’t break the system?</p>
</div>
<div class="paragraph">
<p><em>This problem is difficult because:</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p>In a complex system, small changes can have unexpected side effects. A seemingly innocuous change may break something without this being immediately discovered.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><em>Yet, solving this problem is feasible because:</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p>You have written test suites that express how the system should behave.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="solution-23"><a class="anchor" href="#solution-23"></a>Solution</h4>
<div class="paragraph">
<p>Run your regression test suite every time you think you have reached a stable state.</p>
</div>
</div>
<div class="sect3">
<h4 id="tradeoffs-24"><a class="anchor" href="#tradeoffs-24"></a>Tradeoffs</h4>
<div class="paragraph">
<p><strong>Pros</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>It is easier to Always Have a Running Version.</p>
</li>
<li>
<p>It is easier to Build Confidence as you proceed.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Cons</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>You must relentlessly write the tests.</p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="difficulties-22"><a class="anchor" href="#difficulties-22"></a>Difficulties</h5>
<div class="ulist">
<ul>
<li>
<p>The legacy system may not have adequate regression tests defined. To enable evolution, you will have to Grow Your Test Base Incrementally [p. 144]</p>
</li>
<li>
<p>Tests can only show that defects are present, not that they are absent. You may have failed to test precisely the aspect that you have broken.</p>
</li>
<li>
<p>Run the tests may be very time-consuming, so you might want to run only those tests that you think might be affected by your change. Categorize your tests to avoid “ad hoc” testing of changes, but run all the tests at least once a day.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="rationale-20"><a class="anchor" href="#rationale-20"></a>Rationale</h4>
<div class="paragraph">
<p>Regression tests tell you that whatever ran before still runs. If you consistently build up tests for defects you discover and new features, you will end up with a reusable test base that gives you confidence that your changes are sound, and helps you detect problems earlier.</p>
</div>
<div class="paragraph">
<p>Davis advocates “Regression Test After Every Change” [Dav95] as standard Software Development practice.</p>
</div>
</div>
<div class="sect3">
<h4 id="related-patterns-14"><a class="anchor" href="#related-patterns-14"></a>Related Patterns</h4>
<div class="paragraph">
<p>You should have already started to Write Tests to Enable Evolution [p. 139].</p>
</div>
<div class="paragraph">
<p>A common practice in Extreme Programming is to write tests <em>before</em> you implement new functionality [JAH01]. In the context of reengineering, you should consider writing tests that will fail before you make a change, and will pass if the change is correctly implemented. (Unfortunately it is not generally possible to design tests that will <em>only</em> pass if the change is correct!)</p>
</div>
<div class="paragraph">
<p>Regression tests should help you to Retest Persistent Problems [p. 290].</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="make-a-bridge-to-the-new-town"><a class="anchor" href="#make-a-bridge-to-the-new-town"></a>7.7 Make a Bridge to the New Town</h3>
<div class="paragraph">
<p><em>Also Known As:</em> The Bridge to the New Town [Kel00], Keep the Data — Toss the Code [BS95]</p>
</div>
<div class="paragraph">
<p><strong>Intent</strong> <em>Migrate data from a legacy system by running the new system in parallel, with a bridge in between.</em></p>
</div>
<div class="sect3">
<h4 id="problem-25"><a class="anchor" href="#problem-25"></a>Problem</h4>
<div class="paragraph">
<p>How do you incrementally migrate data from a legacy system to its replacement while the two systems are running in tandem?</p>
</div>
<div class="paragraph">
<p><em>This problem is difficult because:</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Some components of the legacy system are beyond repair and should be replaced.</p>
</li>
<li>
<p>Big-bang replacement of critical components is highly risky.</p>
</li>
<li>
<p>The <em>data</em> manipulated by the legacy components must be kept available and alive during the migration.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><em>Yet, solving this problem is feasible because:</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p>You have a running legacy system.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="solution-24"><a class="anchor" href="#solution-24"></a>Solution</h4>
<div class="paragraph">
<p>Make a (data) bridge that will incrementally transfer data from the legacy system to the replacement system as new components are ready to take the data over from their legacy counterparts.</p>
</div>
<div class="sect4">
<h5 id="steps-8"><a class="anchor" href="#steps-8"></a>Steps</h5>
<div class="ulist">
<ul>
<li>
<p>Identify legacy and replacement components that deal with the same logical data entities.</p>
</li>
<li>
<p>Implement a “data bridge” which is responsible for redirecting <em>read</em> requests from the new component to the legacy data source, if the data have not already been migrated. The bridge is responsible for any necessary data conversion. The new component should not be aware of the bridge.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Figure 7.2: A Bridge helps you to transparently transfer data to the new system.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Adapt the legacy component to redirect <em>write</em> requests to the new component, so that the new data stay up-to-date.</p>
</li>
<li>
<p>When all the data have been transferred, remove the bridge and the legacy component.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="tradeoffs-25"><a class="anchor" href="#tradeoffs-25"></a>Tradeoffs</h4>
<div class="sect4">
<h5 id="pros-24"><a class="anchor" href="#pros-24"></a>Pros</h5>
<div class="ulist">
<ul>
<li>
<p>You can start using the new system without migrating all the legacy data.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="cons-22"><a class="anchor" href="#cons-22"></a>Cons</h5>
<div class="ulist">
<ul>
<li>
<p>A data bridge can be tricky to implement correctly if there is not a simple mapping between the legacy data and the new data.</p>
</li>
<li>
<p>Once some of the data has been transferred, it can be hard to go back.</p>
</li>
<li>
<p>The data bridge will add a performance overhead which may or may not be acceptable.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="difficulties-23"><a class="anchor" href="#difficulties-23"></a>Difficulties</h5>
<div class="ulist">
<ul>
<li>
<p><em>“Stepwise migration schemes have proven very effective in large, layered business systems. They are not common in let’s say CAD applications that have check in /check out persistence and a tightly coupled and very woven object net.”</em> [Kel00]</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="known-uses-14"><a class="anchor" href="#known-uses-14"></a>Known Uses</h4>
<div class="paragraph">
<p>Brodie &amp; Stonebraker discuss much more thoroughly the use of data bridges and gateways in <em>Migrating Legacy Systems</em> [BS95].</p>
</div>
<div class="paragraph">
<p>Keller in “The Bridge to the New Town” [Kel00] focusses more on the technical issue of migrating legacy data, and he points out numerous examples of the pattern successfully being applied.</p>
</div>
<div class="paragraph">
<p>There are many possible variants of this pattern, depending on whether the entire legacy system is to be replaced, or only a component, and whether users should be able to have access to both systems at the same time or not.</p>
</div>
</div>
<div class="sect3">
<h4 id="rationale-21"><a class="anchor" href="#rationale-21"></a>Rationale</h4>
<div class="paragraph">
<p>A bridge between the old and new systems allows you to let users start using features of the new system before it is complete. The bridge isolates the two systems from each other so that the new system can be developed according to a new architectural vision without influence from the legacy system.</p>
</div>
</div>
<div class="sect3">
<h4 id="related-patterns-15"><a class="anchor" href="#related-patterns-15"></a>Related Patterns</h4>
<div class="paragraph">
<p>A bridge helps you Migrate Systems Incrementally and thereby Build Confidence.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="present-the-right-interface"><a class="anchor" href="#present-the-right-interface"></a>7.8 Present the Right Interface</h3>
<div class="paragraph">
<p><em>Also Known As:</em> Semantic Wrapper [O’C00], Sweeping it Under the Rug [FY00]</p>
</div>
<div class="paragraph">
<p><strong>Intent</strong> <em>Wrap a legacy system to export the right abstractions, even if they are not reflected in the existing implementation.</em></p>
</div>
<div class="sect3">
<h4 id="problem-26"><a class="anchor" href="#problem-26"></a>Problem</h4>
<div class="paragraph">
<p>How should the new target system access legacy services during the migration process?</p>
</div>
<div class="paragraph">
<p><em>This problem is difficult because:</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p>The target system is not yet complete so you must rely on legacy services during the migration.</p>
</li>
<li>
<p>The legacy system does not present the interfaces you need for the target system.</p>
</li>
<li>
<p>Implementing new components directly in terms of legacy components will bias the target towards the legacy architecture and design.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><em>Yet, solving this problem is feasible because:</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p>You don’t have to access the legacy services directly.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="solution-25"><a class="anchor" href="#solution-25"></a>Solution</h4>
<div class="paragraph">
<p>Identify the abstractions that you want to have in the new system, and wrap up the old software to emulate the new abstractions.</p>
</div>
<div class="sect4">
<h5 id="hints-15"><a class="anchor" href="#hints-15"></a>Hints</h5>
<div class="paragraph">
<p>Consider, for example, a procedural graphics library that will be used within an object-oriented system. It will be too costly and time-consuming to reimplement the library in an object-oriented way. It would be easier to wrap it as a utility class (<em>i.e.</em>, as a class with static methods but no instances), but it would be wiser to write a slightly thicker wrapper that presents a truly object-oriented interface, but is implemented using the underlying procedural abstractions. In this way the new system will not be polluted by legacy abstractions.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="tradeoffs-26"><a class="anchor" href="#tradeoffs-26"></a>Tradeoffs</h4>
<div class="sect4">
<h5 id="pros-25"><a class="anchor" href="#pros-25"></a>Pros</h5>
<div class="ulist">
<ul>
<li>
<p>It is easier to wean the target system from legacy services if they can use appropriate abstractions from the start.</p>
</li>
<li>
<p>You reduce the risk that the legacy design will adversely influence the new target.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="cons-23"><a class="anchor" href="#cons-23"></a>Cons</h5>
<div class="ulist">
<ul>
<li>
<p>The new interface may not be stable, so developers may be reluctant to use it.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="difficulties-24"><a class="anchor" href="#difficulties-24"></a>Difficulties</h5>
<div class="ulist">
<ul>
<li>
<p>It can be hard to resist the temptation to simply wrap the procedural abstractions as utility classes.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="known-uses-15"><a class="anchor" href="#known-uses-15"></a>Known Uses</h4>
<div class="paragraph">
<p>Alan O’Callaghan [O’C00] presents this pattern as “Semantic Wrapper” briefly in the context of the ADAPTOR pattern language, which addresses migration of large-scale business-critical legacy systems to object-oriented and component-based technology.</p>
</div>
</div>
<div class="sect3">
<h4 id="rationale-22"><a class="anchor" href="#rationale-22"></a>Rationale</h4>
<div class="paragraph">
<p>Present the Right Interface frees you from thinking in terms of the legacy design and makes it easier to consider alternative approaches.</p>
</div>
</div>
<div class="sect3">
<h4 id="related-patterns-16"><a class="anchor" href="#related-patterns-16"></a>Related Patterns</h4>
<div class="paragraph">
<p>Present the Right Interface superficially resembles an Adapter [p. 293], since both use wrappers as their implementation technique. An Adapter, however, adapts an incompatible interfaces to another interface expected by its clients. Present the Right Interface, on the other hand, introduces a new, more suitable interface to a legacy component.</p>
</div>
<div class="paragraph">
<p>Be sure to Deprecate Obsolete Interfaces.</p>
</div>
<div class="paragraph">
<p>If the new interface implemented by the Present the Right Interface is not stable, you should Distinguish Public from Published Interface.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="distinguish-public-from-published-interface"><a class="anchor" href="#distinguish-public-from-published-interface"></a>7.9 Distinguish Public from Published Interface</h3>
<div class="paragraph">
<p><em>Also Known As:</em> Published Interface [O’C00]</p>
</div>
<div class="paragraph">
<p><strong>Intent</strong> <em>Facilitate parallel development by distinguishing unstable “published interfaces” from stable “public interfaces”.</em></p>
</div>
<div class="sect3">
<h4 id="problem-27"><a class="anchor" href="#problem-27"></a>Problem</h4>
<div class="paragraph">
<p>How do you enable migration from legacy interfaces to new target interfaces while the new interfaces are still under development?</p>
</div>
<div class="paragraph">
<p><em>This problem is difficult because:</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p>You want to enable migration to the new target system as early as possible.</p>
</li>
<li>
<p>You do not want to freeze the interfaces of new target components too early.</p>
</li>
<li>
<p>Changing the interface to a component that is widely used will slow down development.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><em>Yet, solving this problem is feasible because:</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p>You can control the status of the interfaces you provide.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="solution-26"><a class="anchor" href="#solution-26"></a>Solution</h4>
<div class="paragraph">
<p>Distinguish between public interfaces of components that are available to the rest of the system, and unstable “published” interfaces of components that are available within a subsystem, but are not yet ready for prime time.</p>
</div>
<div class="sect4">
<h5 id="hints-16"><a class="anchor" href="#hints-16"></a>Hints</h5>
<div class="paragraph">
<p>Since “published” interfaces are not supported by any programming language, you may have to use naming conventions, or abuse other features to achieve the desired effect.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In Java, consider declaring such interfaces as protected, or giving them package scope (undeclared). When the interfaces stabilize, you may redeclare them as being public.</p>
</li>
<li>
<p>In C++, consider declaring components with published interfaces private or protected, and declare as friends the clients that are permitted to use them. When the interfaces stabilize, redeclare the components as public, and delete the declarations of friends.</p>
</li>
<li>
<p>In Smalltalk, consider declaring categories of published components. Also consider declaring published message categories to distinguish stable and unstable messages.</p>
</li>
<li>
<p>Consider decorating the names of unstable components or interfaces to indicate their “published” status. When the component becomes public, rename it and patch all its clients or deprecate the version with the old name (Deprecate Obsolete Interfaces).</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="tradeoffs-27"><a class="anchor" href="#tradeoffs-27"></a>Tradeoffs</h4>
<div class="sect4">
<h5 id="pros-26"><a class="anchor" href="#pros-26"></a>Pros</h5>
<div class="ulist">
<ul>
<li>
<p>Clients of published interfaces are aware that they are likely to change.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="cons-24"><a class="anchor" href="#cons-24"></a>Cons</h5>
<div class="ulist">
<ul>
<li>
<p>Identifying an interface as “published” is purely a matter of convention and discipline.</p>
</li>
<li>
<p>Promoting an interface from published to public entails a certain overhead for clients who should upgrade to the new interface.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="difficulties-25"><a class="anchor" href="#difficulties-25"></a>Difficulties</h5>
<div class="ulist">
<ul>
<li>
<p>Clients can be put in a bind: should they use an unstable published interface, or continue to use the legacy service?</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="known-uses-16"><a class="anchor" href="#known-uses-16"></a>Known Uses</h4>
<div class="paragraph">
<p>Published Interface is another pattern of the ADAPTOR pattern language [O’C00].</p>
</div>
</div>
<div class="sect3">
<h4 id="rationale-23"><a class="anchor" href="#rationale-23"></a>Rationale</h4>
<div class="paragraph">
<p>Clients are in a better position to evaluate the risk of using a component if they know its interface is declared to be “published” but not yet public.</p>
</div>
</div>
<div class="sect3">
<h4 id="related-patterns-17"><a class="anchor" href="#related-patterns-17"></a>Related Patterns</h4>
<div class="paragraph">
<p>When you Present the Right Interface to a legacy component, the new interface may not be stable, so be careful to Distinguish Public from Published Interface. When the new interface stabilizes, or is substituted by a stable replacement component, the interface may become public.</p>
</div>
<div class="paragraph">
<p>Upgrading an interface to public may entail a change to the way it is accessed. Be sure to Deprecate Obsolete Interfaces.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="deprecate-obsolete-interfaces"><a class="anchor" href="#deprecate-obsolete-interfaces"></a>7.10 Deprecate Obsolete Interfaces</h3>
<div class="paragraph">
<p><em>Also Known As:</em> Deprecation [SP98]</p>
</div>
<div class="paragraph">
<p><strong>Intent</strong> <em>Give clients time to react to changes to public interfaces by flagging obsolete interfaces as “deprecated”.</em></p>
</div>
<div class="sect3">
<h4 id="problem-28"><a class="anchor" href="#problem-28"></a>Problem</h4>
<div class="paragraph">
<p>How do you modify an interface without invalidating all the clients?</p>
</div>
<div class="paragraph">
<p><em>This problem is difficult because:</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Changing a public interface can break many clients.</p>
</li>
<li>
<p>Leaving an obsolete interface in place will make future maintenance more difficult.</p>
</li>
<li>
<p>Not all changes are for the better.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><em>Yet, solving this problem is feasible because:</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p>The old and the new interfaces can coexist for a period of time.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="solution-27"><a class="anchor" href="#solution-27"></a>Solution</h4>
<div class="paragraph">
<p>Flag the old interface as being “deprecated”, thereby notifying clients that it will almost certainly be removed in the next upcoming release.</p>
</div>
<div class="sect4">
<h5 id="steps-9"><a class="anchor" href="#steps-9"></a>Steps</h5>
<div class="ulist">
<ul>
<li>
<p>You have determined that a public interface should be changed, but you do not want to break all clients. Implement the new interface, but “deprecate” the old one. The deprecation mechanism should inform clients that the interface has changed, and that a newer interface is recommended instead.</p>
</li>
<li>
<p>Evaluate to what extent the deprecated interface continues to be used, and whether it can be permanently retired. Consider removing it in a future release.</p>
</li>
<li>
<p>Java supports deprecation as a language feature:</p>
<div class="ulist">
<ul>
<li>
<p>Deprecate a feature by adding the tag @deprecated to its javadoc documentation. The tag is not only recognized by the javadoc documentation generator, but the compiler will also generate compile-time warnings if code using deprecated features is compiled with the -deprecated option.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Other approaches are:</p>
<div class="ulist">
<ul>
<li>
<p>Simply inform users in the documentation which interfaces are deprecated.</p>
</li>
<li>
<p>Move or rename the deprecated interface or component. Clients can continue to use them, but must adapt and recompile to continue to use the deprecated form.</p>
</li>
<li>
<p>Replace deprecated components by equivalent ones that generate run-time warnings or output warnings to a log file.</p>
</li>
<li>
<p>Alternatively, consider configuring the programming environment or the deprecated components themselves to generate compile-time or link-time warnings.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="tradeoffs-28"><a class="anchor" href="#tradeoffs-28"></a>Tradeoffs</h4>
<div class="sect4">
<h5 id="pros-27"><a class="anchor" href="#pros-27"></a>Pros</h5>
<div class="ulist">
<ul>
<li>
<p>Clients do not have to immediately adapt to changes.</p>
</li>
<li>
<p>There is time to change your mind.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Cons</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Clients are free to ignore deprecation.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="difficulties-26"><a class="anchor" href="#difficulties-26"></a>Difficulties</h5>
<div class="ulist">
<ul>
<li>
<p>It may be hard to track down all the clients of a deprecated component.</p>
</li>
<li>
<p>It can be hard to decide when to really retire a deprecated component.</p>
</li>
<li>
<p>If you want to keep the interface but change the semantics, you may need to introduce a new component and deprecate the old one. This can be the case if certain methods should now return default values instead of throwing exceptions (or vice versa).</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="known-uses-17"><a class="anchor" href="#known-uses-17"></a>Known Uses</h4>
<div class="paragraph">
<p>Perdita Stevens and Rob Pooley identify Deprecation as a common practice for managing evolving APIs in complex systems [SP98].</p>
</div>
</div>
<div class="sect3">
<h4 id="rationale-24"><a class="anchor" href="#rationale-24"></a>Rationale</h4>
<div class="paragraph">
<p>Deprecation gives you a window of time to evaluate the impact of a change.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="conserve-familiarity"><a class="anchor" href="#conserve-familiarity"></a>7.11 Conserve Familiarity</h3>
<div class="paragraph">
<p><strong>Intent</strong> <em>Avoid radical changes that may alienate users.</em></p>
</div>
<div class="sect3">
<h4 id="problem-29"><a class="anchor" href="#problem-29"></a>Problem</h4>
<div class="paragraph">
<p>How do you accomplish a major overhaul of a legacy system without disrupting the way users are used to getting their job done?</p>
</div>
<div class="paragraph">
<p><em>This problem is difficult because:</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p>The legacy system requires significant changes.</p>
</li>
<li>
<p>The users are not happy with the legacy system, but they understand it well.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><em>Yet, solving this problem is feasible because:</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p>You can migrate incrementally to a new solution.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="solution-28"><a class="anchor" href="#solution-28"></a>Solution</h4>
<div class="paragraph">
<p>Introduce only a constant, relatively low number of changes between each new release.</p>
</div>
</div>
<div class="sect3">
<h4 id="tradeoffs-29"><a class="anchor" href="#tradeoffs-29"></a>Tradeoffs</h4>
<div id="pros-28" class="paragraph">
<p>#FIXME header Pros Cons not equal
<strong>Pros</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Users do not have to change their work habits too much between releases.</p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="difficulties"><a class="anchor" href="#difficulties"></a>Difficulties</h5>
<div class="ulist">
<ul>
<li>
<p>Sometimes radical change is necessary. It can be hard to migrate from a command-line interface to a GUI while conserving familiarity.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="rationale-25"><a class="anchor" href="#rationale-25"></a>Rationale</h4>
<div class="paragraph">
<p>Too much change between releases increases the risk of hidden defects, and decreases the chance of user acceptance.</p>
</div>
<div class="paragraph">
<p>Lehman and Belady’s “Law of Conservation of Familiarity” suggests that the incremental change between releases of a system stays roughly constant over time [LB85]. This is a relatively natural phenomenon because to do anything else introduces unnecessary risks.</p>
</div>
</div>
<div class="sect3">
<h4 id="related-patterns-18"><a class="anchor" href="#related-patterns-18"></a>Related Patterns</h4>
<div class="paragraph">
<p>To Conserve Familiarity you must Migrate Systems Incrementally. Involve the Users to understand what changes will be acceptable. Prototype the Target Solution to evaluate the potential impact of changes.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="use-profiler-before-optimizing"><a class="anchor" href="#use-profiler-before-optimizing"></a>7.12 Use Profiler Before Optimizing</h3>
<div class="paragraph">
<p><strong>Intent</strong> <em>Avoid squandering reengineering effort on needless “optimizations” by verifying where the bottlenecks are.</em></p>
</div>
<div class="sect3">
<h4 id="problem-30"><a class="anchor" href="#problem-30"></a>Problem</h4>
<div class="paragraph">
<p>When should you rewrite a clearly inefficient piece of code?</p>
</div>
<div class="paragraph">
<p><em>This problem is difficult because:</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p>When you are reengineering software, you are likely to encounter many naive algorithms in the legacy code.</p>
</li>
<li>
<p>It can be hard to predict what will impact performance, and you can lose a lot of time on pure supposition.</p>
</li>
<li>
<p>Optimized code is often more complex than simple, naive code.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><em>Yet, solving this problem is feasible because:</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p>There are tools to tell you where you may have a performance problem.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="solution-29"><a class="anchor" href="#solution-29"></a>Solution</h4>
<div class="paragraph">
<p>Whenever you are tempted to optimize a “clearly inefficient” part of the system, first use a profiler to determine whether it is actually a bottleneck.</p>
</div>
<div class="paragraph">
<p>Don’t optimize anything unless your profiler tells you it will make a difference.</p>
</div>
<div class="paragraph">
<p>If you decide to go ahead, prepare benchmarks that will demonstrate the performance gains.</p>
</div>
</div>
<div class="sect3">
<h4 id="tradeoffs-30"><a class="anchor" href="#tradeoffs-30"></a>Tradeoffs</h4>
<div class="sect4">
<h5 id="pros-29"><a class="anchor" href="#pros-29"></a>Pros</h5>
<div class="ulist">
<ul>
<li>
<p>You do not waste time optimizing something that will not make a difference to overall performance.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Cons</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Naive algorithms will survive longer in the system.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="rationale-26"><a class="anchor" href="#rationale-26"></a>Rationale</h4>
<div class="paragraph">
<p>The performance improvement that you can gain by optimizing a bit of code depends on how much time the program, spends in that code in a typical run. A profiler will tell you how much time that is.</p>
</div>
<div class="paragraph">
<p>“Do it, then do it right, then do it fast” is a well-known aphorism that has been credited to many different sources. Very likely its origin is outside of the field of computer science. The rationale behind it is that you risk making a system complex and hard to maintain if you become preoccupied with performance issues too early. Instead, it is better to first find a solution that works, then clean it up once you understand it. Finally, if you can identify any important performance bottlenecks, that is the time to optimize just those parts that will make a difference.</p>
</div>
<div class="paragraph">
<p>As a corollary, it may even be a good idea to replace a bit of complex, “optimized” code by a simpler, “naive” solution, if that won’t severely impact performance, but will make it easier to make other changes.</p>
</div>
<div class="paragraph">
<p>See also Davis’ discussion of “Use Profiler Before Optimizing” [Dav95].</p>
</div>
</div>
<div class="sect3">
<h4 id="related-patterns-19"><a class="anchor" href="#related-patterns-19"></a>Related Patterns</h4>
<div class="paragraph">
<p>If you Refactor to Understand [p. 115], you will have started the second step to “do it right."</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2017-01-26 11:01:42 MEZ
</div>
</div>
</body>
</html>